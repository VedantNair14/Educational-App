<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Education Demo | Online Video Courses For Students </title>
    <meta name="description" content="Unlock your potential with high-quality, free video courses on Python programming, data science, and more. Start learning with Edu-Reels today.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

    <header class="main-header">
        <div class="container">
            <nav class="navbar">
                <div class="navbar-brand">
                    <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>
                    <span>Educational Zone </span>
                </div>
                <!-- THIS NAVBAR SECTION IS NOW CORRECTED -->
                <div class="navbar-links">
                    <a href="#" class="nav-link">Courses</a>
                    <a href="#" class="nav-link">My Learning</a>
                    {% if user %}
                        <!-- This line checks if the user's role is 'admin' -->
                        {% if user.role == 'admin' %}
                        <a href="/upload" class="nav-link">Upload</a>
                        {% endif %}
                        <span class="nav-link username">Welcome, {{ user.username }}</span>
                        <a href="/logout" class="nav-link logout-button">Log Out</a>
                    {% else %}
                        <a href="/login" class="nav-link login-button">Log In</a>
                    {% endif %}
                </div>
            </nav>
            <div class="hero-section">
                <h1>Unlock Your Potential !</h1>
                <p>High-quality video courses to help you master new skills.</p>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="video-grid">
            {% for video in videos %}
                <div class="video-card" onclick="playVideo('{{ video.filename }}')">
                    <div class="thumbnail-container">
                        <img class="thumbnail" src="/static/thumbnails/{{ video.title }}.jpg" alt="Thumbnail for {{ video.title }}" loading="lazy">
                        <div class="play-icon-overlay">
                            <svg class="play-icon" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="currentColor"><path d="M7 6v12l10-6z"></path></svg>
                        </div>
                    </div>
                    <div class="video-info">
                        <span class="video-category">{{ video.category }}</span>
                        <h3 class="video-title">{{ video.title }}</h3>
                        <p class="video-description">Dive deep into this topic with our expert-led video guide.</p>
                    </div>
                </div>
            {% endfor %}
        </div>
    </main>

    <div id="video-popup" class="popup">
        <span class="close-button" onclick="closePopup()">&times;</span>
        <div class="video-wrapper">
            <video id="player" controls autoplay></video>
        </div>
    </div>

    <script>
        const player = document.getElementById("player");
        const popup = document.getElementById("video-popup");

        function playVideo(filename) {
            if (filename.startsWith('http')) {
                player.src = filename;
            } else {
                player.src = `/video/${filename}`;
            }
            popup.style.display = "flex";
            document.body.style.overflow = 'hidden';
        }

        function closePopup() {
            popup.style.display = "none";
            player.pause();
            player.src = "";
            document.body.style.overflow = 'auto';
        }
    </script>
</body>
</html>